var version=function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;let e={tag:{type:[String],default:"div"},cols:{type:[Object,Number,String],default:2},gap:{type:[Object,Number,String],default:0},css:{type:[Boolean],default:!0},hasImgs:{type:Boolean,default:!1}},i=(t,e)=>{if(parseInt(t)>1)return t;if("object"!=typeof t)return 0;let i=1/0,r=t.init||0;for(let s in t){let l=parseInt(s),n=t[l],o=parseInt(n);isNaN(l)||isNaN(o)||e<=l&&l<i&&(i=l,r=n)}return r},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],s=r.length,l={props:e,data:()=>({displayColumns:2,displayGutter:0,style:{}}),mounted(){this.$nextTick(()=>{this._reCalculate()}),window&&window.addEventListener("resize",this._reCalculate)},updated(){this.$nextTick(()=>{this._reCalculate(),this.hasImgs&&this._waitForImages()})},beforeDestroy(){window&&window.removeEventListener("resize",this._reCalculate)},methods:{getChildItemsInColumnsArray(){return(this.$slots.default||[]).filter(t=>t.tag)},_getSize(t){let e=(t=>{let e=getComputedStyle(t);return e||logError("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e})(t),i={};i.height=t.offsetHeight;let l=i.isBorderBox="border-box"==e.boxSizing;for(let t=0;t<s;t++){let s=r[t],l=e[s],n=parseFloat(l);i[s]=isNaN(n)?0:n}let n=i.paddingTop+i.paddingBottom,o=i.marginTop+i.marginBottom;var a=i.borderTopWidth+i.borderBottomWidth;let d=l,h=(t=>{let e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e})(e.height);return!1!==h&&(i.height=h+(d?0:n+a)),i.innerHeight=i.height-(n+a),i.outerHeight=i.height+o,i},_resizeMasonryItem(t){let e=this.displayGutter,i=t.children[0].elm,r=Math.round(this._getSize(i).outerHeight),s=Math.ceil((r+e)/(0+e));t.elm.style.gridRowEnd="span "+s},_resizeAllMasonryItems(){let t=this.getChildItemsInColumnsArray();for(let e=0;e<t.length;e++)this._resizeMasonryItem(t[e])},_reCalculate(){let t=this.windowWidth,e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;this.windowWidth=(window?e:null)||1/0,t!==this.windowWidth&&this._buildGrid()},_buildGrid(){this._reCalculateColumnCount(this.windowWidth),this._reCalculateGutterSize(this.windowWidth),this._resizeAllMasonryItems()},_waitForImages(){t(this.$el).on("always",t=>{this._resizeAllMasonryItems()})},_reCalculateColumnCount(t){let e=i(this.cols,t);e=Math.max(1,Number(e)||0),this.displayColumns=e},_reCalculateGutterSize(t){this.displayGutter=i(this.gap,t)}},render(t){let e=parseInt(this.displayGutter)===1*this.displayGutter?this.displayGutter+"px":this.displayGutter,i={display:["grid","-ms-grid"],gridTemplateColumns:`repeat(auto-fill, minmax(${(100/this.displayColumns*10-this.displayGutter)/10}%, 1fr))`,gridAutoRows:0,gridGap:e};return t(this.tag,this.css?{style:i}:null,this.$slots.default)}};const n={name:"TrueMasonry"},o={install(t,e){let i={...n,...e};t.VERSION="v2.0.3",t.component(i.name,l)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),o}(ImageLoaded);
